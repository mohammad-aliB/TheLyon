<html>
<head>
<style type="text/css">
td,th{display:block;float:left;width:100%}

</style>
</head>
<body>
    <div id="calendar-title"><a href="/Calendar{{=it.lastMonth}}"><</a> {{=it.year}} {{=it.monthName||''}} <a href="/Calendar{{=it.nextMonth}}">></a></div>
<table>
    <tr>
        <th>Sunday</th>
        <th>Monday</th>
        <th>Tuesday</th>
        <th>Wednesday</th>
        <th>Thursday</th>
        <th>Friday</th>
        <th>Saturday</th>
    </tr>
    {{var dayOfWeekCount = 0;}}

    {{var eventsPointer=0;}}
{{? it.firstDay>0}}
<tr>
    {{for(x=0;x<it.firstDay;x++){ }}
        <td class="calendarPadding">
        <span class="number mobile-number">&nbsp;</span>
        <ul>
        </ul>
        </td>
    {{ dayOfWeekCount++;} }}
{{?}}

    {{for(dayCount=1;dayCount<=it.numberOfDays;dayCount++){ }}
        {{? dayOfWeekCount==7}}
            </tr>
            {{dayOfWeekCount=0;}}
        {{?}}
        {{? dayOfWeekCount==0}}
            <tr>            
        {{?}}
        <td>
            <span class="number">{{=dayCount}}</span>
            <span class="mobile-number">{{=new Date(it.year+" "+it.monthName+" "+dayCount).toDateString()}}</span>
            <ul>
        {{ for(y=eventsPointer;y<it.events.length;y++){ }}
            {{? it.events[y].date.getDate()==dayCount}}
                {{eventsPointer=y;}}
                <li>
                    <span class="event-text" onclick="openPopup('{{=it.events[y].id}}');">
                        {{=it.events[y].name}}
                        <span class="hover-text">
                            <span>
                                <span class="hover-event-text" id="title-{{=it.events[y].id}}">{{=it.events[y].name||''}}</span> 
                                <span class="hover-event-date" id="date-{{=it.events[y].id}}">starts: {{=it.events[y].date.toString('dddd, d MMMM yyyy at HH:mm:ss').slice(0, 24)||''}}</span>
                                <span class="hover-event-description" id="description-{{=it.events[y].id}}">{{=it.events[y].description||''}}</span>
                            </span>
                        </span>
                    </span> 
                </li>
            {{?}}
        {{ } }}
        </ul>
        </td>
    {{dayOfWeekCount++;} }}
</table>



<table>
        <tr>
                <th>1</th>
                <th>2</th>
                <th>3</th>
        </tr>
        <tr>
                <td>4</td>
                <td>5</td>
                <td>6</td>
        </tr>
        <tr>
                <td>7</td>
                <td>8</td>
                <td>9</td>
        </tr>
</table>


<div id="popup">
    <button id="popup-close" onclick="closePopup();">close</button>
    <div id="popup-title"></div>
    <div id="popup-date"></div>
    Description:<br>
    <div id="popup-description"></div>
</div>
<div id="popup-background" onclick="closePopup();"></div>
<script type="text/javascript">
    function openPopup(id){
        document.getElementById("popup-title").innerHTML=document.getElementById("title-"+id).innerHTML;
        document.getElementById("popup-date").innerHTML=document.getElementById("date-"+id).innerHTML;
        document.getElementById("popup-description").innerHTML=document.getElementById("description-"+id).innerHTML;
        document.getElementById("popup").style.display="block";
        document.getElementById("popup-background").style.display="block";
    }
    function closePopup(){
        document.getElementById("popup").style.display="none";
        document.getElementById("popup-background").style.display="none";
    }
{{=it.idToOpen}}
</script>
</body>
</html>